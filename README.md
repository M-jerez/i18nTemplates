# grunt-i18nTemplates


### `TASK STEP 1`

Join all your templates files in a single `json` file so it is easy to access all the templates from javascript.
```html
 // index.html
 "<html><body><h1>[[title: Hello World]]</h1> .....</body></html>"
 
 // form.html
 "<for><inpup> ...... </form>"
```
Result `templates.json`
```js
 // i.e. : joined  index.html and form.html
 // result file: 
 {
   "index":"<html><body><h1>[[title: Hello World]]</h1> .....</body></html>",
   "form":"<for><inpup> ...... </form>"
 }
```

### `TASK STEP 2`

Parses template files looking for locale-Definitions `[[key: text]]`, and Generates localization files that contais the string to translate.
```html
 index.html locale definition => [[title: Hello World]]
 
 form.html locale definition => none
```

Parsing the two example files generate the next localization files when `options.locales` is set to `["EN","ES"]`
```js
 // EN_locales.json  
 {
   "index:title":"Hello World"
 }
 
 // ES_locales.json
 {
   "index:title":"Hola Mundo" //this is the translation
 }
```

### `TASK STEP 3`

Reads the values in the localization files and use them to generate the translated template files. i.e `EN_templates.json` and `ES_templates.json`. 
```js
 // EN_templates.json
 {
   "index":"<html><body><h1>Hello World</h1> .....</body></html>",
   "form":"<for><inpup> ...... </form>"
 }
 // ES_templates.json
 {
   "index":"<html><body><h1>Hola Mundo</h1> .....</body></html>",
   "form":"<for><inpup> ...... </form>"
 }
```


### features
+ Join all templates in a single `templates.json` file, so it is more easy to access from javascript.
+ Automatically generate localization files.
+ Compatible with multiple template engines. Translation is done statically so the result can be used by any template engine.
+ Never override the sentences edited in the locale files. it is posiible to run this task at any time, the values in the localization files will never be overwritten, but new templates or new locale-Definitions will be added.


### Generated templates
All templates are joined in the file `templates.json`. This file is never translated and always reflect the last estate of the templates, `templates.json` can be used in system where no translation is equired and you only want the join templates functionality. All the others `Xlang_templates.json` uses the values stored in the localization files. 

If the value of one locale-Definition is changed in one file, i.e from `[[title: Hello]]` to `[[title: Bye]]` this change is not reflected in the translated templates `Xlang_templates.json` becouse this are using the values previously stored in the localization files. this change will be reflected only in `templates.json`.


### Using the generated code.
i.e: using Jquery and mustache
```js
//this is the english template file generated by 
//this task and contains all you templates.
var EN_templates = "./templates/EN_templates.json";
jQuery.getJSON(templateFile, function(data){
      /* data contains all the templates */
      var templates = data;
      Mustache.render(EN_templates.index,{});
});  
```

     
     

# GRUNT TASK CONFIGURATION
This plugin requires Grunt `~0.4.5`

If you haven't used [Grunt](http://gruntjs.com/) before, be sure to check out the [Getting Started](http://gruntjs.com/getting-started) guide, as it explains how to create a [Gruntfile](http://gruntjs.com/sample-gruntfile) as well as install and use Grunt plugins. Once you're familiar with that process, you may install this plugin with this command:

```shell
npm install grunt-i18nTemplates --save-dev
```

Once the plugin has been installed, it may be enabled inside your Gruntfile with this line of JavaScript:

```js
grunt.loadNpmTasks('grunt-i18n-templates');
```

## The "i18nTemplates" task

### Overview
In your project's Gruntfile, add a section named `i18nTemplates` to the data object passed into `grunt.initConfig()`.

```js
grunt.initConfig({
  i18nTemplates: {
  	options: {
    	locales: ["en","es","de"],
        templatesDest: "./public/templates", //this is where the translated templates will be generated
        localesDest: "./src/locales"  //this is where translation files will be stored	
   	},
  	your_target: {
       src: ['./src/templates/**/*.html']
    },
  },
});
```

### Options 

#### options.templatesDest
Type: `String`
Default value: `none, this value is required and not set by default.`

A path to the templates folder.

#### options.localesDest
Type: `String`
Default value: `none, this value is required and not set by default.`

A path to the locales folder.

#### options.locales
Type: `Array`
Default value: `none`

An Array defining all the languages. i.e: `["en","es","de"]`

### Usage Examples
This example will generate 4 locale files in the `./src/locales` folder (one for each language), and will generate 5 templates files in the `./public/templates`, (one for each language + the one without translate).
```js
grunt.initConfig({
  i18nTemplates: {
  	options: {
    	locales: ["en","es","de"],
        templatesDest: "./public/templates", 
        localesDest: "./src/locales" 	
   	},
  	your_target: {
       src: ['./src/templates/**/*.html']
    },
  },
});
```

## Release History
`0.1.4`  fix bug that overrides the values stored in the locales files.

`0.1.3`  Improve Log Info and update Readme.

`0.1.2`  fix bugs.

`0.1.0`  first working version. 
